<!DOCTYPE html>
<script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>
<style> .chart rect { fill: steelblue} </style>
<html>

<body onload='drawChart1()'>


<table>
 <tr>
  <td>
    <h1>
	<div id="title_narrative">New York - Covid 2019</div>
    </td>
   </h1>
 </tr>
 <tr>
  <td><div id="scene3_title">Scene 3 title here</td>
 </tr>
 <tr>
  <td><div id="scene3_info_top">add information here</td>
 </tr>
 <tr>
  <td>
     <button value = "by Sex" type = "button" onclick = "bringContent('area_chart1')"> by Sex </button>
     <button value = "by Race" type = "button" onclick = "bringContent('area_chart2')"> by Race </button>
  </td>
 </tr>
 <tr>
    <td><center><div id="area_chart1_title">chart 1 title</div></center></td>
 </tr>
  <tr>
    <td><div id="area_chart1"></div></td>
 </tr>
 <tr>
  <td><div id="scene3_info_bottom">add information here</td>
 </tr>
 <tr>
  <td>
   <div id="scene3_next_page">
	<button onclick="window.location.href='https://joker2025.github.io/NY_Covid_2020/index.html';">
      Home Page
    </button>
   </div>
   </td>
 </tr>
</table>

<script>

function bringContent(elementID) { 

//clear content of the DIV
document.getElementById("area_chart1").innerHTML = ""; 

//bring corresponding chart based on the button
if (elementID === "area_chart1"){
 drawChart1();
}else{
  drawChart2();  
} 
}; 

// Set the dimensions of the SVG
var	margin = {top: 30, right: 20, bottom: 30, left: 50};
var	width = 600 - margin.left - margin.right;
var	height = 320 - margin.top - margin.bottom;

function drawChart1(){

//***********************************************************
// Chart #1 - by sex
//***********************************************************

//set title of the chart #1
document.getElementById("area_chart1_title").innerHTML = "by Sex"; 


//add SVG for chart #1
var svg_chart1 = d3.select("#area_chart1")
 .append("svg")
  .attr("width", width + margin.left + margin.right)
  .attr("height", height + margin.top + margin.bottom);



//range = output for scales X and Y
//padding to allow space between bars
//scaleBand() in X because values are discrete
var xScale_chart1 = d3.scaleBand().range([0,width]).padding(0.4);
var yScale_chart1 = d3.scaleLinear().range([height,0]);


//add HTML group to include the axes and bar chart
var group_g = svg_chart1
		 .append("g")
		 .attr("transform", "translate(" + margin.left + "," + margin.top + ")"); 



//bring CSV data
const data = d3.csv('https://raw.githubusercontent.com/joker2025/narrative_visualization/master/scene3_by_sex.csv',function(error,data){
if(error) throw error;

//domain for X and Y
xScale_chart1.domain(data.map(function(d){ return d.SEX_GROUP;}));
yScale_chart1.domain([104000,d3.max(data,function(d){ return parseInt(d.CASE_COUNT);})]);


//add axis X to HTML group
group_g.append("g")
 .attr("transform","translate(0," + height + ")")
 .call(d3.axisBottom(xScale_chart1));

//add axis Y to HTML group
group_g.append("g")
  .call(d3.axisLeft(yScale_chart1).tickFormat(function(d){return d;})
  .ticks(10));

//draw bars
group_g.selectAll(".bar")
   .data(data)
   .enter()
   .append("rect")
   .attr("class", "bar")
   .attr("x", function(d) { return xScale_chart1(d.SEX_GROUP); })
   .attr("y", function(d) { return yScale_chart1(d.CASE_COUNT); })
   .attr("width", xScale_chart1.bandwidth())
   .attr("height", function(d) { return height - yScale_chart1(d.CASE_COUNT); });

});

}


function drawChart2(){
//***********************************************************
// Chart #2 - by race
//***********************************************************

//set title of the chart #2
document.getElementById("area_chart1_title").innerHTML = "by Race"; 


//add SVG for chart #2
var svg_chart2 = d3.select("#area_chart1")
 .append("svg")
  .attr("width", width + margin.left + margin.right)
  .attr("height", height + margin.top + margin.bottom);




//range = output for scales X and Y
//padding to allow space between bars
//scaleBand() in X because values are discrete
var xScale_chart2 = d3.scaleBand().range([0,width]).padding(0.4);
var yScale_chart2 = d3.scaleLinear().range([height,0]);


//add HTML group to include the axes and bar chart
var group_g_chart2 = svg_chart2
		 .append("g")
		 .attr("transform", "translate(" + margin.left + "," + margin.top + ")");


//bring CSV data

const data_chart2 = d3.csv('https://raw.githubusercontent.com/joker2025/narrative_visualization/master/scene3_by_race.csv',function(error,data){
if(error) throw error;


xScale_chart2.domain(data.map(function(d){ return d.RACE_GROUP;}));
yScale_chart2.domain([0,d3.max(data,function(d){ return parseInt(d.CASE_COUNT);})]);


//add axis X to HTML group
group_g_chart2.append("g")
 .attr("transform","translate(0," + height + ")")
 .call(d3.axisBottom(xScale_chart2));

//add axis Y to HTML group
group_g_chart2.append("g")
  .call(d3.axisLeft(yScale_chart2).tickFormat(function(d){return d;})
  .ticks(10));

//draw bars
group_g_chart2.selectAll(".bar")
   .data(data)
   .enter()
   .append("rect")
   .attr("class", "bar")
   .attr("x", function(d) { return xScale_chart2(d.RACE_GROUP); })
   .attr("y", function(d) { return yScale_chart2(d.CASE_COUNT); })
   .attr("width", xScale_chart2.bandwidth())
   .attr("height", function(d) { return height - yScale_chart2(d.CASE_COUNT); });

});
}

</script>

</body>
</html>
